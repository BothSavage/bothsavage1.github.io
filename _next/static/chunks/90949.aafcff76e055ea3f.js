"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[90949],{57404:function(e,t,a){a.d(t,{Z:function(){return AlgoliaSearchModal}});var r=a(85893),l=a(67294),s=a(24955),n=a.n(s),c=a(18065),i=a(41664),o=a.n(i),d=a(54110),u=a(23493),h=a.n(u),x=a(66043);function AlgoliaSearchModal(e){let{cRef:t}=e,[a,s]=(0,l.useState)([]),[i,o]=(0,l.useState)(!1),[d,u]=(0,l.useState)(0),[m,f]=(0,l.useState)(null),[p,g]=(0,l.useState)(0),[b,j]=(0,l.useState)(0),[v,y]=(0,l.useState)(0);(0,l.useImperativeHandle)(t,()=>({openSearch:()=>{o(!0)}}));let k=n()((0,x.J)("ALGOLIA_APP_ID"),(0,x.J)("ALGOLIA_SEARCH_ONLY_APP_KEY")),N=k.initIndex((0,x.J)("ALGOLIA_INDEX")),handleSearch=async(e,t)=>{if(f(e),u(t),s([]),y(0),g(0),j(0),e&&""!==e)try{let a=await N.search(e,{page:t,hitsPerPage:10}),{hits:r,nbHits:l,nbPages:n,processingTimeMS:i}=a;y(i),g(n),j(l),s(r);let o=document.getElementById("search-wrapper").getElementsByClassName("replace");setTimeout(()=>{(0,c.Z)({doms:o,search:e,target:{element:"span",className:"text-blue-600 border-b border-dashed"}})},150)}catch(e){console.error("Algolia search error:",e)}},w=(0,l.useRef)(h()(handleSearch,300)),handleInputChange=e=>{let t=e.target.value;w.current(t,0)},closeModal=()=>{o(!1)};return(0,x.J)("ALGOLIA_APP_ID")?(0,r.jsxs)("div",{id:"search-wrapper",className:"".concat(i?"opacity-100":"invisible opacity-0 pointer-events-none"," z-30 fixed h-screen w-screen left-0 top-0 mt-12 flex items-start justify-center"),children:[(0,r.jsxs)("div",{className:"".concat(i?"opacity-100":"invisible opacity-0 translate-y-10"," flex flex-col justify-between w-full min-h-[10rem] max-w-xl dark:bg-hexo-black-gray dark:border-gray-800 bg-white dark:bg- p-5 rounded-lg z-50 shadow border hover:border-blue-600 duration-300 transition-all "),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("div",{className:"text-2xl text-blue-600 font-bold",children:"搜索"}),(0,r.jsx)("div",{children:(0,r.jsx)("i",{className:"text-gray-600 fa-solid fa-xmark p-1 cursor-pointer hover:text-blue-600",onClick:closeModal})})]}),(0,r.jsx)("input",{type:"text",placeholder:"在这里输入搜索关键词...",onChange:e=>handleInputChange(e),className:"text-black dark:text-gray-200 bg-gray-50 dark:bg-gray-600 outline-blue-500 w-full px-4 my-2 py-1 mb-4 border rounded-md"}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(TagGroups,{})}),(0,r.jsx)("ul",{children:a.map(e=>(0,r.jsx)("li",{className:"replace my-2",children:(0,r.jsx)("a",{href:"".concat((0,x.J)("SUB_PATH",""),"/").concat(e.slug),className:"font-bold hover:text-blue-600 text-black dark:text-gray-200",children:e.title})},e.objectID))}),(0,r.jsx)(Pagination,{totalPage:p,page:d,switchPage:e=>{w.current(m,e)}}),(0,r.jsx)("div",{children:b>0&&(0,r.jsxs)("div",{children:["共搜索到 ",b," 条结果，用时 ",v," 毫秒"]})}),(0,r.jsxs)("div",{className:"text-gray-600 mt-2",children:[(0,r.jsxs)("span",{children:[(0,r.jsx)("i",{className:"fa-brands fa-algolia"})," Algolia 提供搜索服务"]})," "]})]}),(0,r.jsx)("div",{onClick:closeModal,className:"z-30 fixed top-0 left-0 w-full h-full flex items-center justify-center glassmorphism"})]}):(0,r.jsx)(r.Fragment,{})}function TagGroups(e){let{tagOptions:t}=(0,d.O)(),a=null==t?void 0:t.slice(0,10);return(0,r.jsx)("div",{id:"tags-group",className:"dark:border-gray-700 space-y-2",children:null==a?void 0:a.map((e,t)=>(0,r.jsx)(o(),{passHref:!0,href:"/tag/".concat(encodeURIComponent(e.name)),className:"cursor-pointer inline-block whitespace-nowrap",children:(0,r.jsxs)("div",{className:" flex items-center text-black dark:text-gray-300 hover:bg-blue-600 dark:hover:bg-yellow-600 hover:scale-110 hover:text-white rounded-lg px-2 py-0.5 duration-150 transition-all",children:[(0,r.jsxs)("div",{className:"text-lg",children:[e.name," "]}),e.count?(0,r.jsx)("sup",{className:"relative ml-1",children:e.count}):(0,r.jsx)(r.Fragment,{})]})},t))})}function Pagination(e){let{totalPage:t,page:a,switchPage:l}=e;if(t<=0)return(0,r.jsx)(r.Fragment,{});let s=[];for(let e=0;e<t;e++){let t=a===e;s.push(function(e,t,a){return(0,r.jsx)("div",{onClick:()=>a(e),className:"".concat(t?"font-bold text-white bg-blue-600 rounded":"hover:text-blue-600 hover:font-bold"," text-center cursor-pointer  w-6 h-6 "),children:e+1})}(e,t,l))}return(0,r.jsx)("div",{className:"flex space-x-1 w-full justify-center py-1",children:s.map(e=>e)})}},18065:function(e,t,a){a.d(t,{Z:function(){return replaceSearchResult}});var r=a(22006);async function replaceSearchResult(e){let{doms:t,search:a,target:l}=e;if(t&&a&&l)try{await (0,r.TY)("https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js","js");let e=window.Mark;if(t instanceof HTMLCollection)for(let r of t){let t=RegExp(a,"gim"),s=new e(r);s.markRegExp(t,l)}else{let r=RegExp(a,"gim"),s=new e(t);s.markRegExp(r,l)}}catch(e){console.error("markjs 加载失败",e)}}},90949:function(e,t,a){a.r(t),a.d(t,{default:function(){return SearchButton}});var r=a(85893),l=a(66043),s=a(54110),n=a(11163),c=a(57404),i=a(67294);function SearchButton(e){let{locale:t}=(0,s.O)(),a=(0,n.useRouter)(),o=(0,i.useRef)(null);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{onClick:function(){(0,l.J)("ALGOLIA_APP_ID")?o.current.openSearch():a.push("/search")},title:t.NAV.SEARCH,alt:t.NAV.SEARCH,className:"cursor-pointer hover:bg-black hover:bg-opacity-10 rounded-full w-10 h-10 flex justify-center items-center duration-200 transition-all",children:(0,r.jsx)("i",{title:t.NAV.SEARCH,className:"fa-solid fa-magnifying-glass"})}),(0,r.jsx)(c.Z,{cRef:o,...e})]})}}}]);