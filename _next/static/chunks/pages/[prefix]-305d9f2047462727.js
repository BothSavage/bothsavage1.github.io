(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[55954],{26434:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[prefix]",function(){return l(71450)}])},71450:function(e,t,l){"use strict";l.r(t),l.d(t,{__N_SSG:function(){return g},default:function(){return _prefix_},getRecommendPost:function(){return getRecommendPost}});var n=l(85893),o=l(72924),i=l.n(o),u=l(67294),d=l(11163),r=l(58622);let a={header:0,sub_header:1,sub_sub_header:2},getPageTableOfContents=(e,t)=>{var l;let n=null!==(l=e.content)&&void 0!==l?l:[],o=function getBlockHeader(e,t,l){if(l||(l=[]),!e)return l;for(let u of e){var n,o,i;let e=null===(n=t.block[u])||void 0===n?void 0:n.value;if(!e)continue;let{type:d}=e;if(d.indexOf("header")>=0){let t=l.find(e=>e.id===u);t||l.push({id:u,type:d,text:(0,r.FB)(null===(i=e.properties)||void 0===i?void 0:i.title),indentLevel:a[d]})}(null===(o=e.content)||void 0===o?void 0:o.length)>0&&getBlockHeader(e.content,t,l)}return l}(n,t),i=[{actual:-1,effective:-1}];for(let e of o){let{indentLevel:t}=e;for(;;){let l=i[i.length-1],{actual:n,effective:o}=l;if(t>n)e.indentLevel=o+1,i.push({actual:t,effective:e.indentLevel});else if(t===n){e.indentLevel=o;break}else i.pop()}}return o};var s=l(90054),c=l(88495),v=l.n(c),f=l(22006),p=l(66043),g=!0;function getRecommendPost(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,n=[],o=[],i=(null==e?void 0:e.tags)||[];for(let l=0;l<t.length;l++){let u=t[l];if(!(u.id===e.id||0>u.type.indexOf("Post")))for(let e=0;e<i.length;e++){let t=i[e];!(o.indexOf(u.id)>-1)&&u.tags&&u.tags.indexOf(t)>-1&&(n.push(u),o.push(u.id))}}return n.length>l&&(n=n.slice(0,l)),n}var _prefix_=e=>{var t;let{post:l,siteInfo:o}=e,r=(0,d.useRouter)(),[a,c]=(0,u.useState)((null==l?void 0:l.password)&&(null==l?void 0:l.password)!=="");(0,u.useEffect)(()=>{if(l||setTimeout(()=>{if(f.jU){let e=document.getElementById("notion-article");e||r.push("/404").then(()=>{console.warn("找不到页面",r.asPath)})}},8e3),(null==l?void 0:l.password)&&(null==l?void 0:l.password)!=="")c(!0);else{var e;c(!1),!a&&(null==l?void 0:null===(e=l.blockMap)||void 0===e?void 0:e.block)&&(l.content=Object.keys(l.blockMap.block).filter(e=>{var t,n;return(null===(n=l.blockMap.block[e])||void 0===n?void 0:null===(t=n.value)||void 0===t?void 0:t.parent_id)===l.id}),l.toc=getPageTableOfContents(l,l.blockMap))}},[l]);let g={title:l?"".concat(null==l?void 0:l.title," | ").concat((0,p.J)("TITLE")):"".concat((0,p.J)("TITLE")," | loading"),description:null==l?void 0:l.summary,type:null==l?void 0:l.type,slug:null==l?void 0:l.slug,image:(null==l?void 0:l.pageCoverThumbnail)||(null==o?void 0:o.pageCover)||i().HOME_BANNER_IMAGE,category:null==l?void 0:null===(t=l.category)||void 0===t?void 0:t[0],tags:null==l?void 0:l.tags};e={...e,lock:a,meta:g,setLock:c,validPassword:e=>{let t=v()(l.slug+e);return!!e&&t===l.password&&(c(!1),!0)}};let _=(0,s.getLayoutByTheme)({theme:(0,p.J)("THEME"),router:(0,d.useRouter)()});return(0,n.jsx)(_,{...e})}}},function(e){e.O(0,[88495,49774,92888,40179],function(){return e(e.s=26434)}),_N_E=e.O()}]);